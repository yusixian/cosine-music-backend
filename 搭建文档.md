## åˆå§‹åŒ–

### prisma & express & ts

```bash
npm init -y
npm i prisma typescript ts-node-dev @types/node @types/express  -D
npm i @prisma/client express
npx prisma init
```

- [QuickStart With TypeScript And Mysql](https://www.prisma.io/docs/getting-started/quickstart)
- [Ts + express åç«¯é¡¹ç›®æ­å»ºè®°å½•](https://juejin.cn/post/7069770431871320078#heading-1)

package.json æ–°å¢å¯åŠ¨è„šæœ¬

```json
"scripts": {
    "dev": "ts-node-dev --respawn --transpile-only src/app.ts"
},
```

æ–°å¢ tsconfig.json

```json
{
  "compilerOptions": {
    "outDir": "build",
    "target": "es5",
    "module": "commonjs",
    "sourceMap": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true
  }
}
```

æ–°å¢ app.ts å’Œ routes

```
â”œâ”€ .gitignore
â”œâ”€ .prettierrc.js
â”œâ”€ package-lock.json
â”œâ”€ package.json
â”œâ”€ prisma
â”‚  â””â”€ schema.prisma
â”œâ”€ README.md
â”œâ”€ src
â”‚  â”œâ”€ app.ts
â”‚  â””â”€ routes
â”‚     â””â”€ index.ts
â”œâ”€ tsconfig.json
â””â”€ .env
```

```typescript
// src/app.ts

import express from 'express';
import routes from './routes'; // è·¯ç”±

const app = express();

app.use(express.json());

const PORT = 1337;

// å¯åŠ¨
app.listen(PORT, async () => {
  console.log(`App is running at http://localhost:${PORT}`);
  routes(app);
});
```

```typescript
// src/routes/index.ts

import { Express, Request, Response, Router } from 'express';

// è·¯ç”±é…ç½®æ¥å£
interface RouterConf {
  path: string;
  router: Router;
  meta?: any;
}

// è·¯ç”±é…ç½®
const routerConf: Array<RouterConf> = [];

function routes(app: Express) {
  // æ ¹ç›®å½•
  app.get('/', (req: Request, res: Response) => res.status(200).send('Hello Shinp!!!'));

  routerConf.forEach((conf) => app.use(conf.path, conf.router));
}

export default routes;
```

### ä»£ç è§„èŒƒ

```bash
npm i -D prettier eslint eslint-plugin-prettier @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier
```

.eslintrc.js

```javascript
// .eslintrc.js

module.exports = {
  root: true,
  // æ‰©å±•è§„åˆ™
  extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended', 'plugin:prettier/recommended', 'prettier'],
  parserOptions: {
    ecmaVersion: 12,
    parser: '@typescript-eslint/parser',
    sourceType: 'module',
  },
  // æ³¨å†Œæ’ä»¶
  plugins: ['@typescript-eslint', 'prettier'],
  // è§„åˆ™ æ ¹æ®è‡ªå·±éœ€è¦å¢åŠ 
  rules: {
    'no-var': 'error',
    'no-undef': 0,
    '@typescript-eslint/consistent-type-definitions': ['error', 'interface'],
  },
};
```

.prettierrc.js é…ç½®

```javascript
// .prettierrc.js
module.exports = {
  tabWidth: 2,
  useTabs: false,
  semi: true,
  singleQuote: true,
  quoteProps: 'as-needed',
  jsxSingleQuote: false,
  trailingComma: 'all',
  bracketSpacing: true,
  jsxBracketSameLine: false,
  arrowParens: 'always',
  rangeStart: 0,
  rangeEnd: Infinity,
  requirePragma: false,
  insertPragma: false,
  proseWrap: 'preserve',
  htmlWhitespaceSensitivity: 'css',
  vueIndentScriptAndStyle: false,
  endOfLine: 'lf',
  embeddedLanguageFormatting: 'auto',
  printWidth: 128,
};
```

å†å¾€ä¸‹åŸºæœ¬éƒ½æ˜¯è¿™ä¸ªé‡Œé¢çš„äº†ï¼Œç„¶åè¿›è¡Œæ‹“å±•

- [Ts + express åç«¯é¡¹ç›®æ­å»ºè®°å½•](https://juejin.cn/post/7069770431871320078#heading-1)

## æ­å»ºç”¨æˆ·è®¤è¯ç³»ç»Ÿ

é¦–å…ˆå®‰è£… `bcrypt` å’Œ `jsonwebtoken` ï¼Œç”¨äºå¯†ç æ•£åˆ—å’Œç”Ÿæˆä»¤ç‰Œã€‚

```bash
yarn add bcryptjs jsonwebtoken
```

## åµŒå…¥ apifox åœ¨çº¿æ¥å£æ–‡æ¡£ç­‰

ä½¿ç”¨ [Express - art-template](https://aui.github.io/art-template/express/)

é¦–å…ˆå®‰è£…

```bash
yarn add art-template express-art-template
```

åœ¨ `express` ä¸­ï¼Œæœ‰ä¸€ä¸ª `render()` æ–¹æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸èƒ½ç”¨çš„ï¼Œä½†é…åˆè¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†

- ç”¨æ³•ï¼š`render("æ–‡ä»¶å",{æ¨¡æ¿æ•°æ®});`
- åœ¨ src ä¸‹æ–°å»º views æ–‡ä»¶å¤¹å­˜æ”¾æˆ‘ä»¬çš„è§†å›¾

```html
<!-- src/views/index.html -->
<!DOCTYPE html>
<html lang="en">
  Â 
  <head>
    Â  Â 
    <meta charset="UTF-8" />
    Â  Â 
    <title>index</title>
    Â 
  </head>
  Â 
  <body>
    Â  Â 
    <h1>{{name}}</h1>
    Â  Â 
    <p>æ­å–œ~ æœåŠ¡æˆåŠŸè·‘èµ·æ¥å•¦</p>
    Â  Â 
    <p>
      Â  Â  Â  æ¥å£æ–‡æ¡£ ğŸ‘‰
      <a href="https://apifox.com/apidoc/shared-6af432f7-e747-42a0-b64d-058b9b288df0/api-70897715">ğŸ“–æ¥å£æ–‡æ¡£</a> Â  Â 
    </p>
    Â  Â 
    <iframe
      src="https://apifox.com/apidoc/shared-6af432f7-e747-42a0-b64d-058b9b288df0/api-70897715"
      width="100%"
      height="900px"
    ></iframe>
    Â 
  </body>
</html>
```

```typescript
// src/app.ts
app.engine('html', require('express-art-template'));
app.set('view options', {
  debug: process.env.NODE_ENV !== 'production',
});
app.set('views', path.join(__dirname, 'views'));
app.get('/', function (req, res) {
  res.render('index.html', {
    //æ¨¡æ¿æ•°æ®å¦‚ä¸‹
    name: 'é¦–é¡µ',
  });
});
```

æ­¤æ—¶å°±å‡ºæ¥äº†

![[Pasted image 20230415033024.png]]

## æ¥å£è®¾è®¡

### é¡¹ç›® TODO

#todo

- [x] åˆå§‹ç¯å¢ƒæ­å»º
- [ ] åŠŸèƒ½è®¾è®¡
- [ ] æ•°æ®åº“è®¾è®¡

### åŠŸèƒ½æ¨¡å— TODO

#todo

- [ ] â« æ™®é€šç”¨æˆ·æ¨¡å—
      Â  - [ ] â« æ³¨å†Œ ing
      Â  - [ ] â« ç™»å½•
      Â  - [ ] ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
      Â  - [ ] ä¿®æ”¹ç”¨æˆ·å¯†ç 
- [ ] ç®¡ç†å‘˜æ¨¡å—
      Â  - [ ] æ³¨å†Œ ing
      Â  - [ ] ç™»å½•
      Â  - [ ] æ·»åŠ å…¶ä»–ç®¡ç†å‘˜/ç”¨æˆ·
      Â  - [ ] ä¿®æ”¹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
- [ ] éŸ³ä¹æ¨¡å—
      Â  - [ ] â« æŸ¥è¯¢éŸ³ä¹
      Â  - [ ] â« æ·»åŠ æ–°éŸ³ä¹ï¼ˆç®¡ç†å‘˜ï¼‰
      Â  - [ ] â« åˆ é™¤éŸ³ä¹ï¼ˆç®¡ç†å‘˜ï¼‰
      Â  - [ ] æ›´æ–°éŸ³ä¹ä¿¡æ¯ï¼ˆç®¡ç†å‘˜ï¼‰
- [ ] æ­Œå•æ¨¡å—
      Â  - [ ] æŸ¥è¯¢æ­Œå•ä¿¡æ¯
      Â  - [ ] æ·»åŠ æ–°æ­Œå•
      Â  - [ ] åˆ é™¤æ­Œå•ï¼ˆæ™®é€šç”¨æˆ·ä»…ä¿®æ”¹è‡ªå·±çš„ï¼‰
      Â  - [ ] æ›´æ–°æ­Œå•ä¿¡æ¯ï¼ˆæ™®é€šç”¨æˆ·ä»…ä¿®æ”¹è‡ªå·±çš„ï¼‰
- [ ] æ ‡ç­¾æ¨¡å—
- [ ] åˆ†åŒºæ¨¡å—
      Â  - [ ] æ·»åŠ åˆ†åŒºï¼ˆè‡ªå®šä¹‰åˆ†åŒºå°é¢ï¼‰
      Â  - [ ] åˆ é™¤åˆ†åŒº
- [ ] æ¨èæ¨¡å—
      Â  - [ ] éšæœºæ¨è
      Â  - [ ] å‰ xxx æ¨è
